<pre class="code">
<span class="srcline"><span class="lineno"><a href="130,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T9U3">C</span>] = polynomialTrajectorySolver(<span class="var type1" id="S3T12U6">X</span>, <span class="var type1" id="S4T12U7">Y</span>, <span class="var type1" id="S5T12U8">Z</span>, <span class="var type1" id="S6T3U9">Mass</span>, <span class="var type1" id="S7T7U10">Moment</span>, <span class="var type1" id="S8T3U11">MaxVel</span>, <span class="var type1" id="S9T3U12">MinZForce</span>, <span class="var type1" id="S10T3U13">MaxForce</span>, <span class="var type1" id="S11T3U14">MaxAngle</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="130,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%UNTITLED Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%   This will solve for the coefficients of a constrained 9 order</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%   polynomial</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% END_POINT_MODES: 'FULL', 'VEL', 'NOVEL'</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% for vel and no vel use zeros in their place</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%the number of iterations</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T3:U11"><span class="var type1" id="S12T3U17">ITERATIONS</span> = <span class="mxinfo " id="T3:U13">10</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,10" id="srcline10">10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="130,11" id="srcline11">11</a></span><span class="line"><span class="comment">%declare ti as zero</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T3:U14"><span class="var type1" id="S13T3U21">ti</span> = <span class="mxinfo " id="T3:U16">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,13" id="srcline13">13</a></span><span class="line"><span class="comment">%this is a ball park estimate of tf for starting</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,14" id="srcline14">14</a></span><span class="line"><span class="comment">%in the future it should take into account the distance</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T3:U17"><span class="var type1" id="S14T3U25">tf</span> = <span class="mxinfo " id="T3:U19">10</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,16" id="srcline16">16</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="130,17" id="srcline17">17</a></span><span class="line"><span class="comment">%create variables for newton's method</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo  sgl" id="T3:U20"><span class="var type1 sgl" id="S15T3U29">t_start</span> = <span class="var type1 sgl" id="S13T3U30">ti</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo  sgl" id="T3:U23"><span class="var type1 sgl" id="S16T3U33">t_end</span> = <span class="mxinfo  sgl" id="T3:U25"><span class="var type1" id="S14T3U35">tf</span> * 2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo  sgl" id="T3:U27"><span class="var type1 sgl" id="S17T3U39">t_mid</span> = <span class="var type1 sgl" id="S14T3U40">tf</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo  sgl" id="T3:U30"><span class="var type1 sgl" id="S18T3U43">Error</span> = <span class="mxinfo  sgl" id="T3:U32">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,22" id="srcline22">22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="130,23" id="srcline23">23</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S19T3U47">it</span> = (<span class="mxinfo " id="T3:U34"><span class="mxinfo " id="T3:U35">1</span>:<span class="mxinfo " id="T3:U36">1</span>:<span class="var type1" id="S12T3U53">ITERATIONS</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="130,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo  sgl" id="T34:U38"><span class="var type1" id="S20T34U56">A</span> = <span class="mxinfo  sgl" id="T34:U40"><span class="fcn" id="F434N7:B58">get9DegPolyMatrix</span>(<span class="var type1" id="S13T3U59">ti</span>, <span class="var type1 sgl" id="S17T3U60">t_mid</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,25" id="srcline25">25</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="130,26" id="srcline26">26</a></span><span class="line">    <span class="comment">%solve for the coefficient matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T75:U43"><span class="var type1 sgl" id="S2T75U63">C</span> = <span class="mxinfo " id="T75:U45">zeros(3, 10)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,28" id="srcline28">28</a></span><span class="line">    <span class="mxinfo  sgl" id="T12:U46"><span class="mxinfo  sgl" id="T12:U47"><span class="var type1 sgl" id="S2T75U71">C</span>(<span class="mxinfo " id="T14:U49">1</span>, <span class="mxinfo " id="T101:U50">:</span>)</span> = <span class="mxinfo  sgl" id="T43:U51"><span class="var type1 sgl" id="S20T34U75">A</span>\<span class="mxinfo " id="T43:U53"><span class="var type1 sgl" id="S3T12U77">X</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo  sgl" id="T12:U55"><span class="mxinfo  sgl" id="T12:U56"><span class="var type1 sgl" id="S2T75U81">C</span>(<span class="mxinfo " id="T14:U58">2</span>, <span class="mxinfo " id="T101:U59">:</span>)</span> = <span class="mxinfo  sgl" id="T43:U60"><span class="var type1 sgl" id="S20T34U85">A</span>\<span class="mxinfo " id="T43:U62"><span class="var type1 sgl" id="S4T12U87">Y</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,30" id="srcline30">30</a></span><span class="line">    <span class="mxinfo  sgl" id="T12:U64"><span class="mxinfo  sgl" id="T12:U65"><span class="var type1 sgl" id="S2T75U91">C</span>(<span class="mxinfo " id="T14:U67">3</span>, <span class="mxinfo " id="T101:U68">:</span>)</span> = <span class="mxinfo  sgl" id="T43:U69"><span class="var type1 sgl" id="S20T34U95">A</span>\<span class="mxinfo " id="T43:U71"><span class="var type1 sgl" id="S5T12U97">Z</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,31" id="srcline31">31</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="130,32" id="srcline32">32</a></span><span class="line">    <span class="comment">%now that we have the Coefficient matrix run the calculate Actuator</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,33" id="srcline33">33</a></span><span class="line">    <span class="comment">%feasibility function</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,34" id="srcline34">34</a></span><span class="line">    <span class="mxinfo  sgl" id="T3:U73"><span class="var type1 sgl" id="S18T3U100">Error</span> = <span class="mxinfo  sgl" id="T3:U75"><span class="fcn" id="F1069N2:B102">calculateActuatorFeasibility</span>(<span class="var type1 sgl" id="S2T75U103">C</span>, <span class="var type1 sgl" id="S6T3U104">Mass</span>, <span class="var type1 sgl" id="S7T7U105">Moment</span>, <span class="var type1" id="S8T3U106">MaxVel</span>, <span class="var type1 sgl" id="S9T3U107">MinZForce</span>, <span class="var type1 sgl" id="S10T3U108">MaxForce</span>, <span class="var type1" id="S11T3U109">MaxAngle</span>, <span class="var type1 sgl" id="S17T3U110">t_mid</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,35" id="srcline35">35</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="130,36" id="srcline36">36</a></span><span class="line">    <span class="comment">% reasses the bounding points of the newton's method variables</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,37" id="srcline37">37</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U84"><span class="var type1 sgl" id="S18T3U114">Error</span> == <span class="mxinfo  sgl" id="T3:U86">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="130,38" id="srcline38">38</a></span><span class="line">        <span class="mxinfo  sgl" id="T3:U87"><span class="var type1 sgl" id="S15T3U118">t_start</span> = <span class="var type1 sgl" id="S17T3U119">t_mid</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,39" id="srcline39">39</a></span><span class="line">        <span class="mxinfo  sgl" id="T3:U90"><span class="var type1" id="S17T3U122">t_mid</span> = <span class="mxinfo  sgl" id="T3:U92">(<span class="mxinfo  sgl" id="T3:U93"><span class="var type1 sgl" id="S17T3U126">t_mid</span> + <span class="var type1 sgl" id="S16T3U127">t_end</span></span>) / 2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,40" id="srcline40">40</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,41" id="srcline41">41</a></span><span class="line">        <span class="mxinfo  sgl" id="T3:U96"><span class="var type1 sgl" id="S16T3U132">t_end</span> = <span class="var type1 sgl" id="S17T3U133">t_mid</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,42" id="srcline42">42</a></span><span class="line">        <span class="mxinfo  sgl" id="T3:U99"><span class="var type1" id="S17T3U136">t_mid</span> = <span class="mxinfo  sgl" id="T3:U101">(<span class="mxinfo  sgl" id="T3:U102"><span class="var type1 sgl" id="S17T3U140">t_mid</span> + <span class="var type1 sgl" id="S15T3U141">t_start</span></span>) / 2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,43" id="srcline43">43</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,44" id="srcline44">44</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,45" id="srcline45">45</a></span><span class="line"><span class="comment">%set the tf to the answer</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,46" id="srcline46">46</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T8:U105"><span class="var type1 sgl" id="S18T3U146">Error</span> == <span class="mxinfo  sgl" id="T3:U107">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="130,47" id="srcline47">47</a></span><span class="line">    <span class="mxinfo  sgl" id="T3:U108"><span class="var type1 sgl" id="S14T3U150">tf</span> = <span class="var type1 sgl" id="S16T3U151">t_end</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,48" id="srcline48">48</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,49" id="srcline49">49</a></span><span class="line">    <span class="mxinfo  sgl" id="T3:U111"><span class="var type1 sgl" id="S14T3U155">tf</span> = <span class="var type1 sgl" id="S17T3U156">t_mid</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,50" id="srcline50">50</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,51" id="srcline51">51</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="130,52" id="srcline52">52</a></span><span class="line"><span class="comment">%recalculate the Coefficient matrix one last time</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,53" id="srcline53">53</a></span><span class="line"><span class="mxinfo  sgl" id="T34:U114"><span class="var type1" id="S20T34U159">A</span> = <span class="mxinfo  sgl" id="T34:U116"><span class="fcn" id="F434N7:B161">get9DegPolyMatrix</span>(<span class="var type1" id="S13T3U162">ti</span>, <span class="var type1 sgl" id="S14T3U163">tf</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,54" id="srcline54">54</a></span><span class="line"><span class="comment">%solve for the coefficient matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,55" id="srcline55">55</a></span><span class="line"><span class="mxinfo " id="T9:U119"><span class="var type1 sgl" id="S2T9U166">C</span> = <span class="mxinfo " id="T9:U121">zeros(3, 11)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo  sgl" id="T12:U122"><span class="mxinfo  sgl" id="T12:U123"><span class="var type1 sgl" id="S2T9U174">C</span>(<span class="mxinfo " id="T3:U125">1</span>, <span class="mxinfo " id="T12:U126"><span class="mxinfo " id="T3:U127">1</span>:<span class="mxinfo " id="T3:U128">10</span></span>)</span> = <span class="mxinfo  sgl" id="T43:U129"><span class="var type1 sgl" id="S20T34U180">A</span>\<span class="mxinfo " id="T43:U131"><span class="var type1 sgl" id="S3T12U182">X</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,57" id="srcline57">57</a></span><span class="line"><span class="mxinfo  sgl" id="T12:U133"><span class="mxinfo  sgl" id="T12:U134"><span class="var type1 sgl" id="S2T9U186">C</span>(<span class="mxinfo " id="T3:U136">2</span>, <span class="mxinfo " id="T12:U137"><span class="mxinfo " id="T3:U138">1</span>:<span class="mxinfo " id="T3:U139">10</span></span>)</span> = <span class="mxinfo  sgl" id="T43:U140"><span class="var type1 sgl" id="S20T34U192">A</span>\<span class="mxinfo " id="T43:U142"><span class="var type1 sgl" id="S4T12U194">Y</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,58" id="srcline58">58</a></span><span class="line"><span class="mxinfo  sgl" id="T12:U144"><span class="mxinfo  sgl" id="T12:U145"><span class="var type1 sgl" id="S2T9U198">C</span>(<span class="mxinfo " id="T3:U147">3</span>, <span class="mxinfo " id="T12:U148"><span class="mxinfo " id="T3:U149">1</span>:<span class="mxinfo " id="T3:U150">10</span></span>)</span> = <span class="mxinfo  sgl" id="T43:U151"><span class="var type1 sgl" id="S20T34U204">A</span>\<span class="mxinfo " id="T43:U153"><span class="var type1 sgl" id="S5T12U206">Z</span>'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,59" id="srcline59">59</a></span><span class="line"><span class="mxinfo  sgl" id="T78:U155"><span class="mxinfo  sgl" id="T78:U156"><span class="var type1 sgl" id="S2T9U210">C</span>(<span class="mxinfo " id="T10:U158">:</span>, <span class="mxinfo " id="T3:U159">11</span>)</span> = <span class="mxinfo " id="T78:U160"><span class="mxinfo  sgl" id="T7:U161">[<span class="var type1 sgl" id="S14T3U216">tf</span>, <span class="var type1 sgl" id="S14T3U217">tf</span>, <span class="var type1 sgl" id="S14T3U218">tf</span>]</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="130,60" id="srcline60">60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="130,61" id="srcline61">61</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="130,62" id="srcline62">62</a></span><span class="line"></span></span>
</pre>
