<pre class="code">
<span class="srcline"><span class="lineno"><a href="142,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T3U3">Error</span>] = calculateActuatorFeasibility(<span class="var type1" id="S3T82U6">Coefficients</span>, <span class="var type1" id="S4T3U7">Mass</span>, <span class="var type1" id="S5T7U8">Moment</span>, <span class="var type1" id="S6T3U9">MaxVel</span>, <span class="var type1" id="S7T3U10">MinZForce</span>, <span class="var type1" id="S8T3U11">MaxForce</span>, <span class="var type1" id="S9T3U12">MaxAngle</span>, <span class="var type1" id="S10T3U13">tf</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="142,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%UNTITLED4 Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%   This function will test a given set of polynomials to see if they fit</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%   within the actuator constraints specified</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,5" id="srcline5">  5</a></span><span class="line"><span class="comment">%   ESSENTIALLY</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%   Coefficients: a 3X10 Matrix of coefficients</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%   Mass</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   Moment - moment vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,9" id="srcline9">  9</a></span><span class="line"><span class="comment">%   tf: the final time</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">%MinZForce = the minumum force in the z direction typlically gravity (-45)</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,11" id="srcline11"> 11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">%the distance of each motor from the center of mass</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,13" id="srcline13"> 13</a></span><span class="line"><span class="mxinfo " id="T3:U11"><span class="var type1" id="S11T3U16">d</span> = <span class="mxinfo " id="T3:U13">0.4</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">%coefficient of drag related to yaw drag</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,15" id="srcline15"> 15</a></span><span class="line"><span class="mxinfo " id="T3:U14"><span class="var type1" id="S12T3U20">c</span> = <span class="mxinfo " id="T3:U16">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">%gravity</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,17" id="srcline17"> 17</a></span><span class="line"><span class="mxinfo " id="T3:U17"><span class="var type1" id="S13T3U24">g</span> = <span class="mxinfo " id="T3:U19">9.81</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,18" id="srcline18"> 18</a></span><span class="line"><span class="comment">%create the moment matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,19" id="srcline19"> 19</a></span><span class="line"><span class="mxinfo " id="T80:U20"><span class="var type1" id="S14T80U28">J</span> = <span class="mxinfo " id="T80:U22">[<span class="mxinfo " id="T7:U23"><span class="mxinfo " id="T3:U24"><span class="var type1" id="S5T7U32">Moment</span>(<span class="mxinfo " id="T14:U26">1</span>)</span>,         <span class="mxinfo " id="T3:U27">0</span>,         <span class="mxinfo " id="T3:U28">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,20" id="srcline20"> 20</a></span><span class="line">            <span class="mxinfo " id="T7:U29"><span class="mxinfo " id="T3:U30">0</span>,          <span class="mxinfo " id="T3:U31"><span class="var type1" id="S5T7U39">Moment</span>(<span class="mxinfo " id="T14:U33">2</span>)</span>, <span class="mxinfo " id="T3:U34">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,21" id="srcline21"> 21</a></span><span class="line">            <span class="mxinfo " id="T7:U35"><span class="mxinfo " id="T3:U36">0</span>,          <span class="mxinfo " id="T3:U37">0</span>,         <span class="mxinfo " id="T3:U38"><span class="var type1" id="S5T7U46">Moment</span>(<span class="mxinfo " id="T14:U40">3</span>)</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,22" id="srcline22"> 22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,23" id="srcline23"> 23</a></span><span class="line"><span class="comment">% Find the maximum accelerations</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo " id="T80:U41">[<span class="var type1" id="S15T80U51">maxima</span>, <span class="var type1" id="S16T81U52">foundRoots</span>] = <span class="fcn" id="F862N3:B54">calculateMaximums</span>(<span class="var type1" id="S3T82U55">Coefficients</span>, 2, <span class="var type1" id="S10T3U57">tf</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,25" id="srcline25"> 25</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,26" id="srcline26"> 26</a></span><span class="line"><span class="comment">%create the fTot</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,27" id="srcline27"> 27</a></span><span class="line"><span class="mxinfo " id="T1:U46">[<span class="mxinfo " id="T3:U47">~</span>, <span class="var type1" id="S12T3U62">c</span>] = size(<span class="var type1" id="S16T81U65">foundRoots</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,28" id="srcline28"> 28</a></span><span class="line"><span class="mxinfo " id="T101:U50"><span class="var type1" id="S19T101U68">f_total</span> = <span class="mxinfo " id="T101:U52">zeros(3, <span class="var type1" id="S12T3U72">c</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,29" id="srcline29"> 29</a></span><span class="line"><span class="comment">%now test whether these maximums are within feasible limits</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,30" id="srcline30"> 30</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S21T3U75">it</span> = (<span class="mxinfo " id="T3:U55"><span class="mxinfo " id="T3:U56">1</span>:<span class="mxinfo " id="T3:U57">length(<span class="var type1" id="S16T81U81">foundRoots</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="142,31" id="srcline31"> 31</a></span><span class="line">    <span class="comment">%calculate the magnitude of the acceleration gravity while taking into</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,32" id="srcline32"> 32</a></span><span class="line">    <span class="comment">%account mass and gravity</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,33" id="srcline33"> 33</a></span><span class="line">    <span class="comment">%mag is the [0, 0, 0, F_Total]' vector of the quadrotor. It must not</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,34" id="srcline34"> 34</a></span><span class="line">    <span class="comment">%exceed the maximum possible acceleration</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,35" id="srcline35"> 35</a></span><span class="line">    <span class="mxinfo " id="T85:U59"><span class="mxinfo " id="T85:U60"><span class="var type1" id="S19T101U85">f_total</span>(<span class="mxinfo " id="T10:U62">1:3</span>, <span class="var type1" id="S21T3U89">it</span>)</span> = <span class="mxinfo " id="T85:U64"><span class="var type1" id="S4T3U91">Mass</span> * (<span class="mxinfo " id="T85:U66"><span class="mxinfo " id="T85:U67"><span class="var type1" id="S15T80U95">maxima</span>(<span class="mxinfo " id="T10:U69">:</span>, <span class="var type1" id="S21T3U97">it</span>)</span> + [0; 0; <span class="var type1" id="S13T3U104">g</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,36" id="srcline36"> 36</a></span><span class="line">    <span class="mxinfo " id="T8:U72"><span class="keyword">if</span> <span class="mxinfo " id="T8:U73"><span class="mxinfo " id="T8:U74"><span class="mxinfo " id="T3:U75">norm(<span class="mxinfo " id="T85:U76"><span class="var type1" id="S19T101U112">f_total</span>(<span class="mxinfo " id="T10:U78">:</span>, <span class="var type1" id="S21T3U114">it</span>)</span>)</span> &gt; <span class="var type1" id="S8T3U115">MaxForce</span></span> || <span class="mxinfo " id="T8:U81"><span class="mxinfo " id="T3:U82"><span class="var type1" id="S19T101U118">f_total</span>(<span class="mxinfo " id="T14:U84">3</span>, <span class="var type1" id="S21T3U120">it</span>)</span> &lt;= <span class="var type1" id="S7T3U121">MinZForce</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="142,37" id="srcline37"> 37</a></span><span class="line">        fprintf(<span class="string">'FORCE TOO HIGH\n'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="142,38" id="srcline38"> 38</a></span><span class="line">        <span class="mxinfo " id="T3:U87"><span class="var type1" id="S2T3U128">Error</span> = <span class="mxinfo " id="T3:U89">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,39" id="srcline39"> 39</a></span><span class="line">        <span class="keyword">return</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,40" id="srcline40"> 40</a></span><span class="line">    <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="142,41" id="srcline41"> 41</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,42" id="srcline42"> 42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,43" id="srcline43"> 43</a></span><span class="line"><span class="comment">%now use a lot of physics and math to calculate the force each motor must</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,44" id="srcline44"> 44</a></span><span class="line"><span class="comment">%be exerting at each point</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,45" id="srcline45"> 45</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,46" id="srcline46"> 46</a></span><span class="line"><span class="comment">%start by declaring the variables</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,47" id="srcline47"> 47</a></span><span class="line"><span class="comment">%inertial frame force vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,48" id="srcline48"> 48</a></span><span class="line"><span class="mxinfo " id="T101:U90"><span class="var type1" id="S25T101U133">Fi</span> = <span class="mxinfo " id="T101:U92">zeros(3, length(<span class="var type1" id="S16T81U139">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,49" id="srcline49"> 49</a></span><span class="line"><span class="mxinfo " id="T81:U94"><span class="mxinfo " id="T81:U95"><span class="var type1" id="S25T101U143">Fi</span>(<span class="mxinfo " id="T14:U97">1</span>, <span class="mxinfo " id="T102:U98">:</span>)</span> = <span class="mxinfo " id="T81:U99"><span class="var type1" id="S4T3U147">Mass</span> * (<span class="mxinfo " id="T81:U101">polyval(<span class="mxinfo " id="T46:U102">polyder(<span class="mxinfo " id="T46:U103">polyder(<span class="mxinfo " id="T12:U104"><span class="var type1" id="S3T82U156">Coefficients</span>(<span class="mxinfo " id="T14:U106">1</span>, <span class="mxinfo " id="T103:U107">:</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U159">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,50" id="srcline50"> 50</a></span><span class="line"><span class="mxinfo " id="T81:U109"><span class="mxinfo " id="T81:U110"><span class="var type1" id="S25T101U163">Fi</span>(<span class="mxinfo " id="T14:U112">2</span>, <span class="mxinfo " id="T102:U113">:</span>)</span> = <span class="mxinfo " id="T81:U114"><span class="var type1" id="S4T3U167">Mass</span> * (<span class="mxinfo " id="T81:U116">polyval(<span class="mxinfo " id="T46:U117">polyder(<span class="mxinfo " id="T46:U118">polyder(<span class="mxinfo " id="T12:U119"><span class="var type1" id="S3T82U176">Coefficients</span>(<span class="mxinfo " id="T14:U121">2</span>, <span class="mxinfo " id="T103:U122">:</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U179">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">% add g to the </span></span></span>
<span class="srcline"><span class="lineno"><a href="142,52" id="srcline52"> 52</a></span><span class="line"><span class="mxinfo " id="T81:U124"><span class="mxinfo " id="T81:U125"><span class="var type1" id="S25T101U183">Fi</span>(<span class="mxinfo " id="T14:U127">3</span>, <span class="mxinfo " id="T102:U128">:</span>)</span> = <span class="mxinfo " id="T81:U129"><span class="var type1" id="S4T3U187">Mass</span> * (<span class="mxinfo " id="T81:U131"><span class="mxinfo " id="T81:U132">polyval(<span class="mxinfo " id="T46:U133">polyder(<span class="mxinfo " id="T46:U134">polyder(<span class="mxinfo " id="T12:U135"><span class="var type1" id="S3T82U197">Coefficients</span>(<span class="mxinfo " id="T14:U137">3</span>, <span class="mxinfo " id="T103:U138">:</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U200">foundRoots</span>)</span> + (<span class="var type1" id="S13T3U203">g</span> * ones(1, length(<span class="var type1" id="S16T81U209">foundRoots</span>)))</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,53" id="srcline53"> 53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,54" id="srcline54"> 54</a></span><span class="line"><span class="comment">% create the first derivative of force vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo " id="T101:U142"><span class="var type1" id="S29T101U212">Fi_prime</span> = <span class="mxinfo " id="T101:U144">zeros(3, length(<span class="var type1" id="S16T81U218">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,56" id="srcline56"> 56</a></span><span class="line"><span class="mxinfo " id="T81:U146"><span class="mxinfo " id="T81:U147"><span class="var type1" id="S29T101U222">Fi_prime</span>(<span class="mxinfo " id="T14:U149">1</span>, <span class="mxinfo " id="T102:U150">:</span>)</span> = <span class="mxinfo " id="T81:U151"><span class="var type1" id="S4T3U226">Mass</span> * (<span class="mxinfo " id="T81:U153">polyval(<span class="mxinfo " id="T46:U154">polyder(<span class="mxinfo " id="T46:U155">polyder(<span class="mxinfo " id="T46:U156">polyder(<span class="mxinfo " id="T12:U157"><span class="var type1" id="S3T82U237">Coefficients</span>(<span class="mxinfo " id="T14:U159">1</span>, <span class="mxinfo " id="T103:U160">:</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U240">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,57" id="srcline57"> 57</a></span><span class="line"><span class="mxinfo " id="T81:U162"><span class="mxinfo " id="T81:U163"><span class="var type1" id="S29T101U244">Fi_prime</span>(<span class="mxinfo " id="T14:U165">2</span>, <span class="mxinfo " id="T102:U166">:</span>)</span> = <span class="mxinfo " id="T81:U167"><span class="var type1" id="S4T3U248">Mass</span> * (<span class="mxinfo " id="T81:U169">polyval(<span class="mxinfo " id="T46:U170">polyder(<span class="mxinfo " id="T46:U171">polyder(<span class="mxinfo " id="T46:U172">polyder(<span class="mxinfo " id="T12:U173"><span class="var type1" id="S3T82U259">Coefficients</span>(<span class="mxinfo " id="T14:U175">2</span>, <span class="mxinfo " id="T103:U176">:</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U262">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,58" id="srcline58"> 58</a></span><span class="line"><span class="mxinfo " id="T81:U178"><span class="mxinfo " id="T81:U179"><span class="var type1" id="S29T101U266">Fi_prime</span>(<span class="mxinfo " id="T14:U181">3</span>, <span class="mxinfo " id="T102:U182">:</span>)</span> = <span class="mxinfo " id="T81:U183"><span class="var type1" id="S4T3U270">Mass</span> * (<span class="mxinfo " id="T81:U185">polyval(<span class="mxinfo " id="T46:U186">polyder(<span class="mxinfo " id="T46:U187">polyder(<span class="mxinfo " id="T46:U188">polyder(<span class="mxinfo " id="T12:U189"><span class="var type1" id="S3T82U281">Coefficients</span>(<span class="mxinfo " id="T14:U191">3</span>, <span class="mxinfo " id="T103:U192">:</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U284">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,59" id="srcline59"> 59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,60" id="srcline60"> 60</a></span><span class="line"><span class="comment">% create the first derivative of force vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,61" id="srcline61"> 61</a></span><span class="line"><span class="mxinfo " id="T101:U194"><span class="var type1" id="S30T101U287">Fi_prime_prime</span> = <span class="mxinfo " id="T101:U196">zeros(3, length(<span class="var type1" id="S16T81U293">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,62" id="srcline62"> 62</a></span><span class="line"><span class="mxinfo " id="T81:U198"><span class="mxinfo " id="T81:U199"><span class="var type1" id="S30T101U297">Fi_prime_prime</span>(<span class="mxinfo " id="T14:U201">1</span>, <span class="mxinfo " id="T102:U202">:</span>)</span> = <span class="mxinfo " id="T81:U203"><span class="var type1" id="S4T3U301">Mass</span> * (<span class="mxinfo " id="T81:U205">polyval(<span class="mxinfo " id="T46:U206">polyder(<span class="mxinfo " id="T46:U207">polyder(<span class="mxinfo " id="T46:U208">polyder(<span class="mxinfo " id="T46:U209">polyder(<span class="mxinfo " id="T12:U210"><span class="var type1" id="S3T82U314">Coefficients</span>(<span class="mxinfo " id="T14:U212">1</span>, <span class="mxinfo " id="T103:U213">:</span>)</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U317">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,63" id="srcline63"> 63</a></span><span class="line"><span class="mxinfo " id="T81:U215"><span class="mxinfo " id="T81:U216"><span class="var type1" id="S30T101U321">Fi_prime_prime</span>(<span class="mxinfo " id="T14:U218">2</span>, <span class="mxinfo " id="T102:U219">:</span>)</span> = <span class="mxinfo " id="T81:U220"><span class="var type1" id="S4T3U325">Mass</span> * (<span class="mxinfo " id="T81:U222">polyval(<span class="mxinfo " id="T46:U223">polyder(<span class="mxinfo " id="T46:U224">polyder(<span class="mxinfo " id="T46:U225">polyder(<span class="mxinfo " id="T46:U226">polyder(<span class="mxinfo " id="T12:U227"><span class="var type1" id="S3T82U338">Coefficients</span>(<span class="mxinfo " id="T14:U229">2</span>, <span class="mxinfo " id="T103:U230">:</span>)</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U341">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,64" id="srcline64"> 64</a></span><span class="line"><span class="mxinfo " id="T81:U232"><span class="mxinfo " id="T81:U233"><span class="var type1" id="S30T101U345">Fi_prime_prime</span>(<span class="mxinfo " id="T14:U235">3</span>, <span class="mxinfo " id="T102:U236">:</span>)</span> = <span class="mxinfo " id="T81:U237"><span class="var type1" id="S4T3U349">Mass</span> * (<span class="mxinfo " id="T81:U239">polyval(<span class="mxinfo " id="T46:U240">polyder(<span class="mxinfo " id="T46:U241">polyder(<span class="mxinfo " id="T46:U242">polyder(<span class="mxinfo " id="T46:U243">polyder(<span class="mxinfo " id="T12:U244"><span class="var type1" id="S3T82U362">Coefficients</span>(<span class="mxinfo " id="T14:U246">3</span>, <span class="mxinfo " id="T103:U247">:</span>)</span>)</span>)</span>)</span>)</span>, <span class="var type1" id="S16T81U365">foundRoots</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,65" id="srcline65"> 65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,66" id="srcline66"> 66</a></span><span class="line"><span class="comment">%calculate the desired omega vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,67" id="srcline67"> 67</a></span><span class="line"><span class="mxinfo " id="T101:U249"><span class="var type1" id="S31T101U368">Omega_desired</span> = <span class="mxinfo " id="T101:U251">zeros(3, length(<span class="var type1" id="S16T81U374">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,68" id="srcline68"> 68</a></span><span class="line"><span class="comment">%Aplha desired calculation</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,69" id="srcline69"> 69</a></span><span class="line"><span class="mxinfo " id="T101:U253"><span class="var type1" id="S32T101U377">Alpha_desired</span> = <span class="mxinfo " id="T101:U255">zeros(3, length(<span class="var type1" id="S16T81U383">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,70" id="srcline70"> 70</a></span><span class="line"><span class="comment">%Fi_bar_prime calc</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,71" id="srcline71"> 71</a></span><span class="line"><span class="mxinfo " id="T101:U257"><span class="var type1" id="S33T101U386">Fi_bar_prime</span> = <span class="mxinfo " id="T101:U259">zeros(3, length(<span class="var type1" id="S16T81U392">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,72" id="srcline72"> 72</a></span><span class="line"><span class="comment">%Fi_bar_prime_prime calc</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,73" id="srcline73"> 73</a></span><span class="line"><span class="mxinfo " id="T101:U261"><span class="var type1" id="S34T101U395">Fi_bar_prime_prime</span> = <span class="mxinfo " id="T101:U263">zeros(3, length(<span class="var type1" id="S16T81U401">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,74" id="srcline74"> 74</a></span><span class="line"><span class="comment">%create the bar vector of Fi</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,75" id="srcline75"> 75</a></span><span class="line"><span class="mxinfo " id="T101:U265"><span class="var type1" id="S35T101U404">Fi_bar</span> = <span class="mxinfo " id="T101:U267">zeros(3, length(<span class="var type1" id="S16T81U410">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,76" id="srcline76"> 76</a></span><span class="line"><span class="comment">%moments</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,77" id="srcline77"> 77</a></span><span class="line"><span class="mxinfo " id="T101:U269"><span class="var type1" id="S36T101U413">Mb</span> = <span class="mxinfo " id="T101:U271">zeros(3, length(<span class="var type1" id="S16T81U419">foundRoots</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,78" id="srcline78"> 78</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,79" id="srcline79"> 79</a></span><span class="line"><span class="comment">%caclculate the bar and prime and alpha</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,80" id="srcline80"> 80</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S21T3U422">it</span> = (<span class="mxinfo " id="T3:U274"><span class="mxinfo " id="T3:U275">1</span>:<span class="mxinfo " id="T3:U276">1</span>:<span class="mxinfo " id="T3:U277">length(<span class="var type1" id="S16T81U430">foundRoots</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="142,81" id="srcline81"> 81</a></span><span class="line">    <span class="mxinfo " id="T3:U279"><span class="var type1" id="S37T3U433">mag</span> = <span class="mxinfo " id="T3:U281">norm(<span class="mxinfo " id="T85:U282"><span class="var type1" id="S25T101U437">Fi</span>(<span class="mxinfo " id="T10:U284">:</span>, <span class="var type1" id="S21T3U439">it</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,82" id="srcline82"> 82</a></span><span class="line">    <span class="mxinfo " id="T85:U286"><span class="mxinfo " id="T85:U287"><span class="var type1" id="S35T101U443">Fi_bar</span>(<span class="mxinfo " id="T10:U289">:</span>, <span class="var type1" id="S21T3U445">it</span>)</span> = <span class="mxinfo " id="T85:U291"><span class="mxinfo " id="T85:U292"><span class="var type1" id="S25T101U448">Fi</span>(<span class="mxinfo " id="T10:U294">:</span>, <span class="var type1" id="S21T3U450">it</span>)</span> / <span class="var type1" id="S37T3U451">mag</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,83" id="srcline83"> 83</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,84" id="srcline84"> 84</a></span><span class="line">    <span class="comment">%Calculation of fi_bar_prime</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,85" id="srcline85"> 85</a></span><span class="line">    <span class="mxinfo " id="T85:U297"><span class="mxinfo " id="T85:U298"><span class="var type1" id="S33T101U455">Fi_bar_prime</span>(<span class="mxinfo " id="T10:U300">:</span>, <span class="var type1" id="S21T3U457">it</span>)</span> = <span class="mxinfo " id="T85:U302">(<span class="mxinfo " id="T85:U303"><span class="mxinfo " id="T85:U304"><span class="var type1" id="S29T101U462">Fi_prime</span>(<span class="mxinfo " id="T10:U306">:</span>, <span class="var type1" id="S21T3U464">it</span>)</span> / <span class="mxinfo " id="T3:U308">norm(<span class="mxinfo " id="T85:U309"><span class="var type1" id="S25T101U468">Fi</span>(<span class="mxinfo " id="T10:U311">:</span>, <span class="var type1" id="S21T3U470">it</span>)</span>)</span></span>) - (<span class="mxinfo " id="T85:U313">(<span class="mxinfo " id="T85:U314"><span class="mxinfo " id="T85:U315"><span class="var type1" id="S25T101U476">Fi</span>(<span class="mxinfo " id="T10:U317">:</span>, <span class="var type1" id="S21T3U478">it</span>)</span> * (<span class="mxinfo " id="T3:U319"><span class="mxinfo " id="T7:U320"><span class="mxinfo " id="T85:U321"><span class="var type1" id="S25T101U483">Fi</span>(<span class="mxinfo " id="T10:U323">:</span>, <span class="var type1" id="S21T3U485">it</span>)</span>'</span> * <span class="mxinfo " id="T85:U325"><span class="var type1" id="S29T101U487">Fi_prime</span>(<span class="mxinfo " id="T10:U327">:</span>, <span class="var type1" id="S21T3U489">it</span>)</span></span>)</span>) / (<span class="mxinfo " id="T3:U329"><span class="mxinfo " id="T3:U330">norm(<span class="mxinfo " id="T85:U331"><span class="var type1" id="S25T101U495">Fi</span>(<span class="mxinfo " id="T10:U333">:</span>, <span class="var type1" id="S21T3U497">it</span>)</span>)</span>^3</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,86" id="srcline86"> 86</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,87" id="srcline87"> 87</a></span><span class="line">    <span class="comment">% calcing fi_bar_prime_prime</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,88" id="srcline88"> 88</a></span><span class="line">    <span class="mxinfo " id="T85:U335"><span class="mxinfo " id="T85:U336"><span class="var type1" id="S34T101U502">Fi_bar_prime_prime</span>(<span class="mxinfo " id="T10:U338">:</span>, <span class="var type1" id="S21T3U504">it</span>)</span> = <span class="mxinfo " id="T85:U340"><span class="mxinfo " id="T85:U341">(<span class="mxinfo " id="T85:U342"><span class="mxinfo " id="T85:U343"><span class="var type1" id="S30T101U510">Fi_prime_prime</span>(<span class="mxinfo " id="T10:U345">:</span>, <span class="var type1" id="S21T3U512">it</span>)</span> / <span class="mxinfo " id="T3:U347">norm(<span class="mxinfo " id="T85:U348"><span class="var type1" id="S25T101U516">Fi</span>(<span class="mxinfo " id="T10:U350">:</span>, <span class="var type1" id="S21T3U518">it</span>)</span>)</span></span>) - (<span class="mxinfo " id="T85:U352">(<span class="mxinfo " id="T85:U353"><span class="mxinfo " id="T85:U354"><span class="mxinfo " id="T85:U355"><span class="mxinfo " id="T85:U356">2 * <span class="mxinfo " id="T85:U357"><span class="var type1" id="S29T101U528">Fi_prime</span>(<span class="mxinfo " id="T10:U359">:</span>, <span class="var type1" id="S21T3U530">it</span>)</span></span> * (<span class="mxinfo " id="T3:U361"><span class="mxinfo " id="T7:U362"><span class="mxinfo " id="T85:U363"><span class="var type1" id="S25T101U535">Fi</span>(<span class="mxinfo " id="T10:U365">:</span>, <span class="var type1" id="S21T3U537">it</span>)</span>'</span> * <span class="mxinfo " id="T85:U367"><span class="var type1" id="S29T101U539">Fi_prime</span>(<span class="mxinfo " id="T10:U369">:</span>, <span class="var type1" id="S21T3U541">it</span>)</span></span>)</span> + <span class="mxinfo " id="T85:U371"><span class="mxinfo " id="T85:U372"><span class="var type1" id="S25T101U544">Fi</span>(<span class="mxinfo " id="T10:U374">:</span>, <span class="var type1" id="S21T3U546">it</span>)</span> * (<span class="mxinfo " id="T3:U376"><span class="mxinfo " id="T7:U377"><span class="mxinfo " id="T85:U378"><span class="var type1" id="S29T101U551">Fi_prime</span>(<span class="mxinfo " id="T10:U380">:</span>, <span class="var type1" id="S21T3U553">it</span>)</span>'</span> * <span class="mxinfo " id="T85:U382"><span class="var type1" id="S29T101U555">Fi_prime</span>(<span class="mxinfo " id="T10:U384">:</span>, <span class="var type1" id="S21T3U557">it</span>)</span></span>)</span></span> + <span class="mxinfo " id="T85:U386"><span class="mxinfo " id="T85:U387"><span class="var type1" id="S25T101U560">Fi</span>(<span class="mxinfo " id="T10:U389">:</span>, <span class="var type1" id="S21T3U562">it</span>)</span> * (<span class="mxinfo " id="T3:U391"><span class="mxinfo " id="T7:U392"><span class="mxinfo " id="T85:U393"><span class="var type1" id="S25T101U567">Fi</span>(<span class="mxinfo " id="T10:U395">:</span>, <span class="var type1" id="S21T3U569">it</span>)</span>'</span> * <span class="mxinfo " id="T85:U397"><span class="var type1" id="S30T101U571">Fi_prime_prime</span>(<span class="mxinfo " id="T10:U399">:</span>, <span class="var type1" id="S21T3U573">it</span>)</span></span>)</span></span>) / <span class="mxinfo " id="T3:U401"><span class="mxinfo " id="T3:U402">norm(<span class="mxinfo " id="T85:U403"><span class="var type1" id="S25T101U578">Fi</span>(<span class="mxinfo " id="T10:U405">:</span>, <span class="var type1" id="S21T3U580">it</span>)</span>)</span>^3</span></span>)</span> + (<span class="mxinfo " id="T85:U407">(<span class="mxinfo " id="T85:U408"><span class="mxinfo " id="T85:U409">3 * <span class="mxinfo " id="T85:U410"><span class="var type1" id="S25T101U589">Fi</span>(<span class="mxinfo " id="T10:U412">:</span>, <span class="var type1" id="S21T3U591">it</span>)</span></span> * (<span class="mxinfo " id="T3:U414"><span class="mxinfo " id="T7:U415"><span class="mxinfo " id="T85:U416"><span class="var type1" id="S25T101U596">Fi</span>(<span class="mxinfo " id="T10:U418">:</span>, <span class="var type1" id="S21T3U598">it</span>)</span>'</span> * <span class="mxinfo " id="T85:U420"><span class="var type1" id="S29T101U600">Fi_prime</span>(<span class="mxinfo " id="T10:U422">:</span>, <span class="var type1" id="S21T3U602">it</span>)</span></span>)</span>) / <span class="mxinfo " id="T3:U424"><span class="mxinfo " id="T3:U425">norm(<span class="mxinfo " id="T85:U426"><span class="var type1" id="S25T101U607">Fi</span>(<span class="mxinfo " id="T10:U428">:</span>, <span class="var type1" id="S21T3U609">it</span>)</span>)</span>^5</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,89" id="srcline89"> 89</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,90" id="srcline90"> 90</a></span><span class="line">    <span class="comment">%the omega desired calc</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo " id="T85:U430"><span class="mxinfo " id="T85:U431"><span class="var type1" id="S31T101U614">Omega_desired</span>(<span class="mxinfo " id="T10:U433">:</span>, <span class="var type1" id="S21T3U616">it</span>)</span> = <span class="mxinfo " id="T85:U435">cross(<span class="mxinfo " id="T85:U436"><span class="var type1" id="S35T101U620">Fi_bar</span>(<span class="mxinfo " id="T10:U438">:</span>, <span class="var type1" id="S21T3U622">it</span>)</span>, <span class="mxinfo " id="T85:U440"><span class="var type1" id="S33T101U624">Fi_bar_prime</span>(<span class="mxinfo " id="T10:U442">:</span>, <span class="var type1" id="S21T3U626">it</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,92" id="srcline92"> 92</a></span><span class="line">    <span class="comment">%set the z moment to zero</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,93" id="srcline93"> 93</a></span><span class="line">    <span class="mxinfo " id="T3:U444"><span class="mxinfo " id="T3:U445"><span class="var type1" id="S31T101U630">Omega_desired</span>(<span class="mxinfo " id="T14:U447">3</span>, <span class="var type1" id="S21T3U632">it</span>)</span> = <span class="mxinfo " id="T3:U449">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,94" id="srcline94"> 94</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,95" id="srcline95"> 95</a></span><span class="line">    <span class="comment">%the alpha vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,96" id="srcline96"> 96</a></span><span class="line">    <span class="mxinfo " id="T85:U450"><span class="mxinfo " id="T85:U451"><span class="var type1" id="S32T101U637">Alpha_desired</span>(<span class="mxinfo " id="T10:U453">:</span>, <span class="var type1" id="S21T3U639">it</span>)</span> = <span class="mxinfo " id="T85:U455">cross(<span class="mxinfo " id="T85:U456"><span class="var type1" id="S35T101U643">Fi_bar</span>(<span class="mxinfo " id="T10:U458">:</span>, <span class="var type1" id="S21T3U645">it</span>)</span>, (<span class="mxinfo " id="T85:U460"><span class="mxinfo " id="T85:U461"><span class="var type1" id="S34T101U649">Fi_bar_prime_prime</span>(<span class="mxinfo " id="T10:U463">:</span>, <span class="var type1" id="S21T3U651">it</span>)</span> - <span class="mxinfo " id="T85:U465">cross(<span class="mxinfo " id="T85:U466"><span class="var type1" id="S31T101U655">Omega_desired</span>(<span class="mxinfo " id="T10:U468">:</span>, <span class="var type1" id="S21T3U657">it</span>)</span>, (<span class="mxinfo " id="T85:U470">cross(<span class="mxinfo " id="T85:U471"><span class="var type1" id="S31T101U662">Omega_desired</span>(<span class="mxinfo " id="T10:U473">:</span>, <span class="var type1" id="S21T3U664">it</span>)</span>, <span class="mxinfo " id="T85:U475"><span class="var type1" id="S33T101U666">Fi_bar_prime</span>(<span class="mxinfo " id="T10:U477">:</span>, <span class="var type1" id="S21T3U668">it</span>)</span>)</span>))</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,97" id="srcline97"> 97</a></span><span class="line">    <span class="comment">%set the z to zero</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,98" id="srcline98"> 98</a></span><span class="line">    <span class="mxinfo " id="T3:U479"><span class="mxinfo " id="T3:U480"><span class="var type1" id="S32T101U672">Alpha_desired</span>(<span class="mxinfo " id="T14:U482">3</span>, <span class="var type1" id="S21T3U674">it</span>)</span> = <span class="mxinfo " id="T3:U484">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,99" id="srcline99"> 99</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,100" id="srcline100">100</a></span><span class="line">    <span class="comment">%FINALLY! now that we have the desired omega and the simulated current</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,101" id="srcline101">101</a></span><span class="line">    <span class="comment">%omega, we can calcuate the exact forces that each motor must produce at a</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,102" id="srcline102">102</a></span><span class="line">    <span class="comment">%given time(the maximum accelerations along a polynomial)</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,103" id="srcline103">103</a></span><span class="line">    <span class="mxinfo " id="T85:U485"><span class="mxinfo " id="T85:U486"><span class="var type1" id="S36T101U679">Mb</span>(<span class="mxinfo " id="T10:U488">:</span>, <span class="var type1" id="S21T3U681">it</span>)</span> = <span class="mxinfo " id="T85:U490"><span class="mxinfo " id="T85:U491"><span class="var type1" id="S14T80U684">J</span> * <span class="mxinfo " id="T85:U493"><span class="var type1" id="S32T101U686">Alpha_desired</span>(<span class="mxinfo " id="T10:U495">:</span>, <span class="var type1" id="S21T3U688">it</span>)</span></span> + <span class="mxinfo " id="T85:U497">cross(<span class="mxinfo " id="T85:U498"><span class="var type1" id="S31T101U692">Omega_desired</span>(<span class="mxinfo " id="T10:U500">:</span>, <span class="var type1" id="S21T3U694">it</span>)</span>, <span class="mxinfo " id="T85:U502"><span class="var type1" id="S14T80U696">J</span> * <span class="mxinfo " id="T85:U504"><span class="var type1" id="S31T101U698">Omega_desired</span>(<span class="mxinfo " id="T10:U506">:</span>, <span class="var type1" id="S21T3U700">it</span>)</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,104" id="srcline104">104</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,105" id="srcline105">105</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,106" id="srcline106">106</a></span><span class="line"><span class="mxinfo " id="T104:U508"><span class="var type1" id="S39T104U703">motorForces</span> = <span class="mxinfo " id="T104:U510">zeros(4, length(<span class="var type1" id="S36T101U709">Mb</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,107" id="srcline107">107</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,108" id="srcline108">108</a></span><span class="line"><span class="mxinfo " id="T97:U512"><span class="var type1" id="S40T97U712">torqueMat</span> = <span class="mxinfo " id="T97:U514">[1, 1,  1,  1;</span></span>
<span class="srcline"><span class="lineno"><a href="142,109" id="srcline109">109</a></span><span class="line">             <span class="var type1" id="S11T3U720">d</span>, 0, -<span class="var type1" id="S11T3U723">d</span>,  0;</span></span>
<span class="srcline"><span class="lineno"><a href="142,110" id="srcline110">110</a></span><span class="line">             0, <span class="var type1" id="S11T3U727">d</span>,  0, -<span class="var type1" id="S11T3U730">d</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,111" id="srcline111">111</a></span><span class="line">            -<span class="var type1" id="S12T3U733">c</span>, <span class="var type1" id="S12T3U734">c</span>, -<span class="var type1" id="S12T3U736">c</span>,  <span class="var type1" id="S12T3U737">c</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,112" id="srcline112">112</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="142,113" id="srcline113">113</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S21T3U740">it</span> = (<span class="mxinfo " id="T3:U524"><span class="mxinfo " id="T3:U525">1</span>:<span class="mxinfo " id="T3:U526">1</span>:<span class="mxinfo " id="T3:U527">length(<span class="var type1" id="S16T81U748">foundRoots</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="142,114" id="srcline114">114</a></span><span class="line">    <span class="mxinfo " id="T99:U529"><span class="mxinfo " id="T99:U530"><span class="var type1" id="S39T104U752">motorForces</span>(<span class="mxinfo " id="T105:U532">:</span>, <span class="var type1" id="S21T3U754">it</span>)</span> = <span class="mxinfo " id="T99:U534"><span class="var type1" id="S40T97U756">torqueMat</span> \ <span class="mxinfo " id="T99:U536">[<span class="mxinfo " id="T3:U537">norm(<span class="mxinfo " id="T85:U538"><span class="var type1" id="S19T101U762">f_total</span>(<span class="mxinfo " id="T10:U540">:</span>, <span class="var type1" id="S21T3U764">it</span>)</span>)</span>; <span class="mxinfo " id="T3:U542"><span class="var type1" id="S36T101U767">Mb</span>(<span class="mxinfo " id="T14:U544">1</span>, <span class="var type1" id="S21T3U769">it</span>)</span>; <span class="mxinfo " id="T3:U546"><span class="var type1" id="S36T101U772">Mb</span>(<span class="mxinfo " id="T14:U548">2</span>, <span class="var type1" id="S21T3U774">it</span>)</span>; <span class="mxinfo " id="T3:U550"><span class="var type1" id="S36T101U777">Mb</span>(<span class="mxinfo " id="T14:U552">3</span>, <span class="var type1" id="S21T3U779">it</span>)</span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,115" id="srcline115">115</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,116" id="srcline116">116</a></span><span class="line">    <span class="comment">% while in the for loop check to see if the forces are within the</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,117" id="srcline117">117</a></span><span class="line">    <span class="comment">% bounds</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,118" id="srcline118">118</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="142,119" id="srcline119">119</a></span><span class="line">    <span class="mxinfo " id="T8:U554"><span class="keyword">if</span> <span class="mxinfo " id="T8:U555"><span class="mxinfo " id="T8:U556">any(<span class="mxinfo " id="T100:U557"><span class="mxinfo " id="T99:U558"><span class="var type1" id="S39T104U787">motorForces</span>(<span class="mxinfo " id="T105:U560">:</span>, <span class="var type1" id="S21T3U789">it</span>)</span> &lt;= <span class="mxinfo " id="T3:U562">1</span></span>)</span> || <span class="mxinfo " id="T8:U563">any(<span class="mxinfo " id="T100:U564"><span class="mxinfo " id="T99:U565"><span class="var type1" id="S39T104U795">motorForces</span>(<span class="mxinfo " id="T105:U567">:</span>, <span class="var type1" id="S21T3U797">it</span>)</span> &gt;= <span class="mxinfo " id="T3:U569"><span class="var type1" id="S8T3U799">MaxForce</span> / 4</span></span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="142,120" id="srcline120">120</a></span><span class="line">        fprintf(<span class="string">'INDIVIDUAL MOTOR FORCE TOO HIGH\n'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="142,121" id="srcline121">121</a></span><span class="line">        <span class="mxinfo " id="T3:U571"><span class="var type1" id="S2T3U807">Error</span> = <span class="mxinfo " id="T3:U573">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,122" id="srcline122">122</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,123" id="srcline123">123</a></span><span class="line">    <span class="keyword">end</span></span>    </span></span>
<span class="srcline"><span class="lineno"><a href="142,124" id="srcline124">124</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,125" id="srcline125">125</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,126" id="srcline126">126</a></span><span class="line"><span class="comment">%IF YOU HAVE NOT RETURNED BY THIS POINT THE TRAJECTORY IS WITHIN FEASIBLE</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,127" id="srcline127">127</a></span><span class="line"><span class="comment">%LIMITS</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,128" id="srcline128">128</a></span><span class="line"><span class="mxinfo " id="T3:U574"><span class="var type1" id="S2T3U812">Error</span> = <span class="mxinfo " id="T3:U576">-<span class="mxinfo " id="T3:U577">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,129" id="srcline129">129</a></span><span class="line"><span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="142,130" id="srcline130">130</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="142,131" id="srcline131">131</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="142,132" id="srcline132">132</a></span><span class="line"></span></span>
</pre>
